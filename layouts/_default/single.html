{{- define "main" }}
<style>
  i[id*="post_meta_style"] {
    display: flex;
    align-items: center;
    margin: 0 0 10px 0;
  }
</style>

<article class="post-single">
  <div id="single-content">
    <header class="post-header">
      {{ partial "breadcrumbs.html" . }}
      <h1 class="post-title">
        {{ .Title }} {{- if .Draft }}<sup
          ><span class="entry-isdraft">&nbsp;&nbsp;[draft]</span></sup
        >{{- end }}
      </h1>
      {{- if .Description }}
      <div class="post-description">{{ .Description }}</div>
      {{- end }} {{- if not (.Param "hideMeta") }}
      <div class="post-meta">
        {{- partial "post_meta.html" . -}}
        <span style="opacity: 0.8">
          <span id="post_meta_style_7" class="post_meta_style">
            <span
              ><div class="post-meta-icons">
                <svg
                  t="1686157193140"
                  class="icon"
                  viewBox="0 0 1755 1024"
                  version="1.1"
                  xmlns="http://www.w3.org/2000/svg"
                  p-id="27591"
                  width="14"
                  height="14"
                >
                  <path
                    d="M877.824366 1024C336.201509 1024 25.71008 571.977143 12.544366 552.96a73.142857 73.142857 0 0 1 0-81.92C25.71008 452.022857 336.201509 0 877.824366 0s852.114286 452.022857 865.28 471.04a73.142857 73.142857 0 0 1 0 81.92C1729.938651 571.977143 1419.447223 1024 877.824366 1024zM165.412937 512C250.624366 615.131429 504.43008 877.714286 877.824366 877.714286s627.2-262.582857 712.411428-365.714286C1505.024366 408.868571 1251.218651 146.285714 877.824366 146.285714S250.624366 408.868571 165.412937 512z"
                    fill="#8a8a8a"
                    p-id="27592"
                  ></path>
                  <path
                    d="M877.824366 219.428571a292.571429 292.571429 0 1 0 292.571428 292.571429 292.571429 292.571429 0 0 0-292.571428-292.571429z m-91.794286 292.571429A91.428571 91.428571 0 1 1 877.824366 420.571429a91.428571 91.428571 0 0 1-91.794286 91.428571z"
                    fill="#8a8a8a"
                    p-id="27593"
                  ></path>
                </svg>
              </div>
            </span>
            <span>
              <span id="busuanzi_container_page_pv"
                ><span id="busuanzi_value_page_pv"></span
              ></span>
            </span>
          </span>
          <!-- <span id="post_meta_style_8" class="post_meta_style">
            <span>
              <div class="post-meta-icons">
                <svg
                  t="1686157256688"
                  class="icon"
                  viewBox="0 0 1234 1024"
                  version="1.1"
                  xmlns="http://www.w3.org/2000/svg"
                  p-id="35996"
                  width="16"
                  height="16"
                >
                  <path
                    d="M1137.408 7.789714H101.924571c-51.986286 0-94.134857 42.148571-94.134857 94.134857V760.868571l0.036572 2.587429c1.371429 50.797714 42.971429 91.547429 94.098285 91.547429l94.125715-0.009143 0.009143 95.762285c0 17.472 6.948571 34.230857 19.291428 46.592l1.746286 1.673143a65.892571 65.892571 0 0 0 91.446857-1.673143l142.354286-142.354285 686.509714 0.009143c51.986286 0 94.134857-42.148571 94.134857-94.134858V101.924571c0-51.986286-42.148571-94.134857-94.134857-94.134857zM101.924571 101.924571h1035.483429V760.868571H411.904L290.194286 882.569143V760.868571H101.924571V101.924571z"
                    fill="#707070"
                    p-id="35997"
                  ></path>
                  <path
                    d="M619.666286 431.396571m-94.134857 0a94.134857 94.134857 0 1 0 188.269714 0 94.134857 94.134857 0 1 0-188.269714 0Z"
                    fill="#707070"
                    p-id="35998"
                  ></path>
                  <path
                    d="M337.261714 431.396571m-94.134857 0a94.134857 94.134857 0 1 0 188.269714 0 94.134857 94.134857 0 1 0-188.269714 0Z"
                    fill="#707070"
                    p-id="35999"
                  ></path>
                  <path
                    d="M902.070857 431.396571m-94.134857 0a94.134857 94.134857 0 1 0 188.269714 0 94.134857 94.134857 0 1 0-188.269714 0Z"
                    fill="#707070"
                    p-id="36000"
                  ></path>
                </svg>
              </div>
            </span>
            <span>
              <script src="https://cdn.staticfile.org/twikoo/{{ .Site.Params.twikoo.version }}/twikoo.all.min.js"></script>
              <script>
                let url = document.documentURI
                {{ $baseURL := .Site.BaseURL }}
                let dnsUrl = {{ $baseURL }}
                let urlSplit = url.split(dnsUrl)
                let finalUrl = urlSplit[1]
                if (finalUrl[0] !== '/') {
                    finalUrl = '/'+finalUrl
                }
                twikoo.getCommentsCount({
                    envId: {{ .Site.Params.twikoo.id }}, // 环境 ID
                region: {{ .Site.Params.twikoo.region }}, // 环境地域，默认为 ap-shanghai，如果您的环境地域不是上海，需传此参数
                urls: [ // 不包含协议、域名、参数的文章路径列表，必传参数
                    // '/2020/10/post-1.html', //填写示例
                    finalUrl,
                ],
                    includeReply: false // 评论数是否包括回复，默认：false
                }).then(function (res) {
                    let count = res[0].count
                    const obj = document.getElementById("comment_count");
                    obj.innerText = count
                    // 返回示例: [
                    //   { url: '/2020/10/post-1.html', count: 10 },
                    // ]
                }).catch(function (err) {
                    // 发生错误
                    console.error(err);
                });
              </script>
              <span id="comment_count"></span>
            </span>
          </span> -->
        </span>
        {{- partial "translation_list.html" . -}} {{- partial "edit_post.html" .
        -}} {{- partial "post_canonical.html" . -}}
      </div>
      {{- end }}
    </header>
    {{- $isHidden := .Params.cover.hidden | default
    .Site.Params.cover.hiddenInSingle | default .Site.Params.cover.hidden }} {{-
    partial "cover1.html" (dict "cxt" . "IsHome" false "isHidden" $isHidden) }}
    {{- if (.Param "ShowToc") }} {{- partial "toc.html" . }} {{- end }} {{- if
    .Content }}
    <div class="post-content">
      {{- if not (.Param "disableAnchoredHeadings") }} {{- partial
      "anchored_headings.html" .Content -}} {{- else }}{{ .Content }}{{ end }}
    </div>
    {{- end }} {{- if .Param "reward" }}
    <div class="post-reward">
      <div
        style="
          padding: 0 0 0 0;
          margin: 0 0 0 0;
          width: 100%;
          font-size: 16px;
          text-align: center;
        "
      >
        <div id="QR" style="opacity: 0">
          <div id="wechat" style="display: inline-block">
            <a class="fancybox" rel="group">
              <img
                id="wechat_qr"
                src="{{ .Site.Params.WechatPay | absURL }}"
                alt="wechat_pay"
            /></a>
            <p>微信</p>
          </div>
          <div id="alipay" style="display: inline-block">
            <a class="fancybox" rel="group">
              <img
                id="alipay_qr"
                src="{{ .Site.Params.Alipay | absURL }}"
                alt="alipay"
            /></a>
            <p>支付宝</p>
          </div>
        </div>
        <button
          id="rewardButton"
          onclick="
                    var qr = document.getElementById('QR');
                    if (qr.style.opacity === '0') {
                        qr.style.opacity='1';
                    } else {
                        qr.style.opacity='0'
                    }"
        >
          <span>🧧 鼓励</span>
        </button>
      </div>
    </div>
    {{- end }}

    <footer class="post-footer">
      <!--{{- if .Params.tags }}
            <ul class="post-tags">
                {{- range ($.GetTerms "tags") }}
                <li><a href="{{ .Permalink }}">{{ .LinkTitle }}</a></li>
                {{- end }}
            </ul>
            {{- end }}-->
      {{- if (.Param "ShowPostNavLinks") }} {{- partial "post_nav_links.html" .
      }} {{- end }} {{- if (and .Site.Params.ShowShareButtons (ne
      .Params.disableShare true)) }} {{- partial "share_icons.html" . -}} {{-
      end }}
    </footer>
  </div>

  {{- if (.Param "comments") }} {{- partial "comments.html" . }} {{- end }}
</article>

{{- end }}{{/* end main */}}
